<!DOCTYPE html><html><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description"><title>大型分布式网站--3 互联网安全架构(常见的Web攻击手段) | MNUO</title><link rel="stylesheet" type="text/css" href="/css/style.css?v=0.0.0"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/normalize/8.0.0/normalize.min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/1.0.0/pure-min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/1.0.0/grids-responsive-min.css"><link rel="stylesheet" href="//cdn.bootcss.com/font-awesome/4.7.0/css/font-awesome.min.css"><script type="text/javascript" src="//cdn.bootcss.com/jquery/3.3.1/jquery.min.js"></script><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">大型分布式网站--3 互联网安全架构(常见的Web攻击手段)</h1><a id="logo" href="/.">MNUO</a><p class="description"></p></div><div id="nav-menu"><a class="current" href="/."><i class="fa fa-home"> Start</i></a><a href="/archives/"><i class="fa fa-archive"> Archiv</i></a><a href="/about/"><i class="fa fa-user"> Über</i></a><a href="/atom.xml"><i class="fa fa-rss"> RSS</i></a></div></div><div class="pure-g" id="layout"><div class="pure-u-1 pure-u-md-3-4"><div class="content_container"><div class="post"><h1 class="post-title">大型分布式网站--3 互联网安全架构(常见的Web攻击手段)</h1><div class="post-meta">Aug 8, 2016<span> | </span><span class="category"><a href="/categories/分布式java基础应用和实践/">分布式java基础应用和实践</a></span></div><div class="post-content"><h3 id="3-互联网安全架构"><a href="#3-互联网安全架构" class="headerlink" title="3 互联网安全架构"></a>3 互联网安全架构</h3><h4 id="1-常见的Web攻击手段"><a href="#1-常见的Web攻击手段" class="headerlink" title="1 常见的Web攻击手段"></a>1 常见的Web攻击手段</h4><h5 id="1-1-XSS-攻击"><a href="#1-1-XSS-攻击" class="headerlink" title="1.1 XSS 攻击"></a>1.1 XSS 攻击</h5><p>XSS攻击的全称跨站脚本攻击(Cross Site Scripting),为不跟层叠样式表(Cascading Style Sheets,CSS)的混淆,故将跨站脚本攻击缩写为XSS.跨站脚本攻击指的是攻击者在网页中嵌入恶意脚本程序,当用户打开网页时,脚本程序便开始在客户端的浏览器上执行,以盗取客户端cookie,用户名密码,下载执行病毒木马程序,甚至是获取客户端admin权限等.</p>
<ul>
<li><p>XSS攻击原理:</p>
<blockquote>
<p>例如:当一个恶意用户,在一家知名博客网站上转载了一篇非常火的博文,文章中嵌入了而已的脚本代码,其他人访问这篇文章时,嵌入文章中的脚本代码便会执行,达到恶意攻击用户的目的</p>
</blockquote>
</li>
<li><p>XSS攻击的防范</p>
<blockquote>
<p>XSS之所以会发生,是因为用户输入的数据变成了代码,因此,我们需要对用户输入的数据进行HTML转义处理,将其中的”尖括号”,”单引号”,等特殊字符进行转义编码.</p>
</blockquote>
</li>
</ul>
<h5 id="1-2-CSRF-攻击"><a href="#1-2-CSRF-攻击" class="headerlink" title="1.2 CSRF 攻击"></a>1.2 CSRF 攻击</h5><p>CSRF攻击的全称是跨站请求伪造(cross site request forgery),是一种对网站的恶意利用,尽管听起来跟XSS跨站脚本攻击有点相似,但事实上CSRF与XSS差别很大,XSS利用的是站点内的信任用户,而CSRF则是通过伪装来自受信任用户的请求来利用受信任的网站.可以这么理解CSRF攻击:攻击者盗用了你的身份,以你的名义向第三方网站发送而已请求.CRSF能做的事情包括利用你的什么发邮件,发短信,进行交易转账等,甚至盗取你的账号.</p>
<ul>
<li><p>CSRF 攻击原理<br><img src="http://7xsqwa.com1.z0.glb.clouddn.com/mnuo-largedistributed-1.3-crsf.jpg" alt="CRSF攻击原理"></p>
</li>
<li><p>CSRF 防范</p>
<ul>
<li>将cookie设为HTTPONLY</li>
<li>使用token</li>
</ul>
</li>
</ul>
<h5 id="1-3-SQL注入攻击"><a href="#1-3-SQL注入攻击" class="headerlink" title="1.3 SQL注入攻击"></a>1.3 SQL注入攻击</h5><p> SQL注入就是通过把SQL命令伪装成正常的HTTP请求参数,传递到服务端,欺骗服务器最终执行恶意的SQL命令,达到入侵的目的.</p>
<ul>
<li>SQL注入的防范:<ul>
<li>使用预编译语句</li>
<li>使用ORM框架 mybatis,hibernate</li>
<li>避免免密码明文存放</li>
</ul>
</li>
</ul>
<h5 id="1-4-文件上传漏洞"><a href="#1-4-文件上传漏洞" class="headerlink" title="1.4 文件上传漏洞"></a>1.4 文件上传漏洞</h5><p>文件上传攻击指的是恶意攻击者,利用一些站点没有对文件的类型做很好的检验,上传了可执行的文件或者脚本,并且通过脚本获得服务器上相应的权利,或者是通过有道外部用户访问,下载上传的病毒或木马文件,达到攻击的目的.</p>
<ul>
<li><p>1 通过魔数判断文件上传类型<br>很多类型的文件,起始的几个字节内容是固定,因此,根据几个字节的内容,就可以确定文件类型,这几个字节也被称为魔数(magic number)</p>
<pre><code>/**
 * @author saxon
 */
public class MagicNumberDemo {
    /**
     * @param args
     * @throws Exception 
     */
    public static void main(String[] args) throws Exception {
        System.out.println(getType(&quot;C:\\Users\\Administrator\\Desktop/0014100a9e7720160406130553890894.jpg&quot;));
        System.out.println(getType(&quot;C:\\Users\\Administrator\\Desktop/data.xml&quot;));
        System.out.println(getType(&quot;D:\\appserver\\eclipse\\eclipse/eclipse.exe&quot;));
    }
    /**
     * 读取文件头
     * @param filePath
     * @return
     * @throws Exception
     */
    private static String getFileHeader(String filePath) throws Exception{
        //在这里需要注意的是,每个文件的魔数的长度都不相同,因此需要使用startwith
        byte[] b = new byte[28];
        InputStream inputStream = new FileInputStream(filePath);
        inputStream.read(b, 0, 28);
        inputStream.close();
        return bytes2hex(b);
    }
    /**
     * 判断文件类型
     * @param filePath
     * @return
     * @throws Exception
     */
    public static FileType getType(String filePath) throws Exception{
        String fileHead = getFileHeader(filePath);
        if(fileHead == null || fileHead.length() == 0){
            return null;
        }
        fileHead = fileHead.toUpperCase();
        FileType[] fileTypes = FileType.values();
        for(FileType type : fileTypes){
            if(fileHead.startsWith(type.getValue())){
                return type;
            }
        }
        return null;
    }
    public static String bytes2hex(byte[] bs){
        StringBuffer sBuffer = new StringBuffer(bs.length);
        String stemp;
        for(int i = 0; i &lt; bs.length; i ++){
            stemp = Integer.toHexString(0xFF &amp; bs[i]);
            if(stemp.length() &lt; 2){
                sBuffer.append(0);
            }
            sBuffer.append(stemp.toUpperCase());
        }
        return sBuffer.toString();
    }
}
enum FileType{
    JPEG(&quot;FFD8FF&quot;),
    PNG(&quot;89504E47&quot;),
    GIF(&quot;47494638&quot;),
    TIFF(&quot;49492A00&quot;),
    BMP(&quot;424D&quot;),
    DWG(&quot;41433130&quot;),
    PSD(&quot;38425053&quot;),
    XML(&quot;3C3F786D6C&quot;),
    HTML(&quot;68746D6C3E&quot;),
    PDF(&quot;255044462D312E&quot;),
    ZIP(&quot;504B0304&quot;),
    RAR(&quot;52617221&quot;),
    WAV(&quot;57415645&quot;),
    AVI(&quot;41564920&quot;);

    private String value=&quot;&quot;;

    private FileType(String value) {
        this.value = value;
    }
    public String getValue() {
        return value;
    }
    public void setValue(String value) {
        this.value = value;
    }
}
</code></pre></li>
<li><p>imagemagick + jmagick<br>imagemagick是一套功能强大,稳定并且开源的针对图片处理的开发工具包,能够处理多种格式的图片文件,可以利用imagemagick来对图片进行缩放处理.<br>jmagick 由于imagemagick没有提供jni对应的头文件,如果要在Java环境中使用imagemagick还需要安装jmagick,通过jmagick来对imagemagick进行调用</p>
</li>
</ul>
<h5 id="3-1-5-DDoS攻击"><a href="#3-1-5-DDoS攻击" class="headerlink" title="3.1.5 DDoS攻击"></a>3.1.5 DDoS攻击</h5><p>DDos(Distributed Denial of Service)即分布式拒绝服务攻击,是目前最为强大,最难以防御的攻击方式之一.<br>DoS攻击就是利用合理的客户端请求来占用过多的服务器资源,从而使合法用户无法 得到服务器的相应.DDoS攻击手段是在传统的DoS攻击基础之上产生的一了诶攻击方式.DDoS攻击手段是在传统的DoS攻击基础之上产生的一类攻击方式,传统的DoS攻击一般是采用一对一的方式,当攻击目标的CPU速度,内存或者网络宽带等各项性能指标不高的情况下,他的效果是明显的.<br>DDoS的原理就非常简单了,它指的是攻击者借助公共网络,将数量庞大的计算机设备联合起来作为攻击平台,对一个或多个目标发动攻击,从而达到瘫痪目标主机的目的.</p>
<p>方式:  </p>
<ul>
<li><p>1 SYN Food是互联网最经典的攻击方式之一,它利用了TCP协议三次握手的过程来达成攻击的目的.攻击者伪造大量的IP地址给服务器发送SYN报文,但是由于伪造的IP地址几乎不可能存在,也就不可能从客户端得到任何回应,服务端将维护一个非常大的半连接等待队列,并且不断对这个列表中的IP地址进行遍历和重试,占用了大量的系统资源,更为重要的是,由于服务器资源有限,大量的恶意客户端信息沾满了服务器的等待队列,导致服务器不再接收新的SYN请求,正常用户无法完成三次握手与服务器进行通信,这便是SYN Flood攻击.<br><img src="http://7xsqwa.com1.z0.glb.clouddn.com/mnuo-largedistributed-1.3-ddos-tcp.jpg" alt=""></p>
</li>
<li><p>2 DNS Query Flood<br>DNS Query Flood 实际上是UDP Flood 攻击的一种变形,由于DNS服务在互联网中具有不可替代的作用,一旦DNS服务器瘫痪,影响甚大.DNS Query Flood攻击采用的方法是向被攻击的服务器发送海量的域名解析请求,通常,请求解析的域名是随机生成的,大部分根本就不存在,并且通过伪造端口和客户端IP 方式查询请求被ACL过滤</p>
</li>
<li><p>3 CC攻击<br>CC(Challenge Collapsar)攻击属于DDos的一种,是基于应用层HTTP协议发起的DDos攻击,也被称为HTTP Flood. CC攻击的原理是这样的,攻击者通过控制的大量”肉鸡”或者利用从互联网上搜寻的大量匿名的HTTP代理,模拟正常的用户给网站发起请求,知道该网站拒绝服务为止.</p>
</li>
</ul>
</div><div class="tags"><a href="/tags/分布式java基础应用和实践/">分布式java基础应用和实践</a></div><div class="post-nav"><a class="pre" href="/2016/08/09/大型分布式网站--3 互联网安全架构(2常用的安全算法)/">大型分布式网站--3 互联网安全架构(2常用的安全算法)</a><a class="next" href="/2016/08/05/大型分布式网站--2 分布式系统基础设施/">大型分布式网站--2 分布式系统基础设施</a></div></div></div></div><div class="pure-u-1-4 hidden_mid_and_down"><div id="sidebar"><div class="widget"><form class="search-form" action="//www.google.com/search" method="get" accept-charset="utf-8" target="_blank"><input type="text" name="q" maxlength="20" placeholder="Search"/><input type="hidden" name="sitesearch" value="http://yoursite.com"/></form></div><div class="widget"><div class="widget-title"><i class="fa fa-folder-o"> Kategorien</i></div><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/Github/">Github</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Hadoop/">Hadoop</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/JMS/">JMS</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Java/">Java</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Java-Web/">Java Web</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Linux/">Linux</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Mave/">Mave</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/MySQL/">MySQL</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Nosql/">Nosql</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/SSH/">SSH</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/SpringCloud/">SpringCloud</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Web-Service/">Web Service</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/分布式java基础应用和实践/">分布式java基础应用和实践</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-star-o"> Tags</i></div><div class="tagcloud"><a href="/tags/分布式java基础应用和实践/" style="font-size: 15px;">分布式java基础应用和实践</a> <a href="/tags/nginx/" style="font-size: 15px;">nginx</a> <a href="/tags/Maven/" style="font-size: 15px;">Maven</a> <a href="/tags/Github/" style="font-size: 15px;">Github</a> <a href="/tags/MySql/" style="font-size: 15px;">MySql</a> <a href="/tags/java/" style="font-size: 15px;">java</a> <a href="/tags/Linux/" style="font-size: 15px;">Linux</a> <a href="/tags/SSH/" style="font-size: 15px;">SSH</a> <a href="/tags/Web-Service/" style="font-size: 15px;">Web Service</a> <a href="/tags/JMS/" style="font-size: 15px;">JMS</a> <a href="/tags/SpringCloud/" style="font-size: 15px;">SpringCloud</a> <a href="/tags/Hadoop/" style="font-size: 15px;">Hadoop</a> <a href="/tags/Nosql/" style="font-size: 15px;">Nosql</a></div></div><div class="widget"><div class="widget-title"><i class="fa fa-file-o"> Letzte</i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2018/06/05/SpringCloud/3、SpringCloud之服务消费者（rest+ribbon和Feign）/">3、SpringCloud之服务消费者（rest+ribbon和Feign）</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/06/04/SpringCloud/2、SpringCloud之Eureka（服务注册和服务发现基础篇）/">2、SpringCloud之Eureka（服务注册和服务发现基础篇）</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/06/04/SpringCloud/1、SpringCloud概念和组件介绍/">1、SpringCloud概念和组件介绍</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/08/12/SSH/webservice基础/">WebService</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/07/12/JMS/JSM(1)--介绍/">JMS(1) -- 介绍</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/06/25/SSH/spring security 系列2/">spring security 系列2</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/06/20/SSH/spring security 系列1/">spring security 系列1</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/06/15/Nosql/Mongodb windown安装和简单入门/">Mongodb windown安装和简单入门</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/06/14/SSH/Hibernate 二级缓存/">Hibernate 二级缓存</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/06/13/hadoop系列学习/Redis + Springmvc + Hibernate + Spring/">Redis + Springmvc + Hibernate + Spring</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-external-link"> Blogroll</i></div><ul></ul><a href="http://www.example1.com/" title="site-name1" target="_blank">site-name1</a><ul></ul><a href="http://www.example2.com/" title="site-name2" target="_blank">site-name2</a><ul></ul><a href="http://www.example3.com/" title="site-name3" target="_blank">site-name3</a></div></div></div><div class="pure-u-1 pure-u-md-3-4"><div id="footer">Copyright © 2018 <a href="/." rel="nofollow">MNUO.</a> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a><a rel="nofollow" target="_blank" href="https://github.com/tufu9441/maupassant-hexo"> Theme</a> by<a rel="nofollow" target="_blank" href="https://github.com/pagecho"> Cho.</a></div></div></div><a class="show" id="rocket" href="#top"></a><script type="text/javascript" src="/js/totop.js?v=0.0.0" async></script><script type="text/javascript" src="//cdn.bootcss.com/fancybox/3.3.5/jquery.fancybox.min.js" async></script><script type="text/javascript" src="/js/fancybox.js?v=0.0.0" async></script><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/fancybox/3.3.5/jquery.fancybox.min.css"><script type="text/javascript" src="/js/codeblock-resizer.js?v=0.0.0"></script><script type="text/javascript" src="/js/smartresize.js?v=0.0.0"></script></div></body></html>